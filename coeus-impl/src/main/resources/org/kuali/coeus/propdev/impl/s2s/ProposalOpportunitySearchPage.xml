<?xml version="1.0" encoding="UTF-8"?>
<!--
   - Copyright Â© 2005-2018 Kuali, Inc.
   - All Rights Reserved
   - You may use and modify this code under the terms of the Kuali, Inc.
   - Pre-Release License Agreement. You may not distribute it.
   -
   - You should have received a copy of the Kuali, Inc. Pre-Release License
   - Agreement with this file. If not, please write to license@kuali.co.
 -->
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<!-- Opportunity Search Page -->
	<bean id="PropDev-OpportunityPage" parent="PropDev-OpportunityPage-parentBean" />
	<bean id="PropDev-OpportunityPage-parentBean" abstract="true" parent="PropDev-DocumentPage" p:readOnly="@{!#editModes[#proposalAuthConsts.MODIFY_S2S]}">
		<property name="items">
			<list>
				<bean parent="PropDev-OpportunityPage-SearchSection" p:order="10"/>
				<bean parent="PropDev-OpportunityPage-ButtonSection" p:order="20"/>
				<bean parent="PropDev-OpportunityPage-Info" p:order="30"/>
			</list>
		</property>
		<property name="header">
			<bean parent="Uif-PageHeader" p:headerText="Opportunity Search" />
		</property>
	</bean>
	
	<!-- Opportunity Search Section -->
	<bean id="PropDev-OpportunityPage-SearchSection" parent="PropDev-OpportunityPage-SearchSection-parentBean" />
	<bean id="PropDev-OpportunityPage-SearchSection-parentBean"
		abstract="true" parent="Uif-VerticalBoxSection"
		p:render="@{!#ViewHelper.containsOpportunity(document) and !#parent.readOnly}">
		<property name="items">
			<list>
				<bean parent="PropDev-OpportunityPage-OpportunitySearch"
					p:order="10"/>
			</list>
		</property>
	</bean>

	<bean id="PropDev-OpportunityPage-ButtonSection" parent="PropDev-OpportunityPage-ButtonSection-parentBean" />
 	<bean id="PropDev-OpportunityPage-ButtonSection-parentBean" abstract="true" parent="Uif-HorizontalBoxSubSection"
 			p:render="@{#ViewHelper.containsOpportunity(document) and !document.developmentProposal.isChild() and !#parent.readOnly}">
 		<property name="items">
 		<list>
 			<bean parent="Uif-SecondaryActionButton-Small" p:actionLabel="Remove opportunity"
 			p:methodToCall="clearOpportunity" p:iconClass="icon-remove" p:order="10"/>
 			<bean parent="PropDev-OpportunityPage-OpportunitySearch"
 			p:quickfinder.quickfinderAction.iconClass="icon-exchange"
 			p:quickfinder.quickfinderAction.actionLabel="Change opportunity" p:render="@{!#parent.readOnly}" p:order="20" />	
 		</list>
 		</property>
 	</bean>

	<bean id="PropDev-OpportunityPage-Info" parent="PropDev-OpportunityPage-Info-parentBean" />
	<bean id="PropDev-OpportunityPage-Info-parentBean" abstract="true"
		parent="Uif-TabSection" p:defaultActiveTabId="@{#ViewHelper.containsOpportunity(document) ? 'PropDev-OpportunityPage-General':'PropDev-OpportunityPage-UserAttachedForms'}">
		<property name="items">
			<list>
				<ref bean="PropDev-OpportunityPage-General" />
				<ref bean="PropDev-OpportunityPage-Forms" />
				<ref bean="PropDev-OpportunityPage-SubmissionDetailsSection" />
                <ref bean="PropDev-OpportunityPage-UserAttachedForms" />
                <ref bean="PropDev-OpportunityPage-Override" />
			</list>
		</property>
		<property name="footer">
			<bean parent="Uif-FooterBase">
			</bean>
		</property>
	</bean>

	<bean id="PropDev-OpportunityPage-OpportunitySearch" parent="PropDev-OpportunityPage-OpportunitySearch-parentBean" />
	<bean id="PropDev-OpportunityPage-OpportunitySearch-parentBean"
		abstract="true" parent="Uif-InputField" p:fieldLabel.render="false"
		p:propertyName="newS2sOpportunity.opportunityId" p:render="@{!document.developmentProposal.isChild()}">
		<property name="control">
			<bean parent="Uif-HiddenControl" />
		</property>
		<property name="quickfinder">
			<bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.coeus.propdev.impl.s2s.S2sOpportunity"
				p:hideCriteriaOnSearch="true"
                p:viewName="S2sOpportunity-LookupViewName"
				p:fieldConversions="opportunityId:newS2sOpportunity.opportunityId,cfdaNumber:newS2sOpportunity.cfdaNumber,opportunityTitle:newS2sOpportunity.opportunityTitle,s2sSubmissionTypeCode:newS2sOpportunity.s2sSubmissionTypeCode,revisionCode:newS2sOpportunity.revisionCode,competetionId:newS2sOpportunity.competetionId,openingDate:newS2sOpportunity.openingDate,closingDate:newS2sOpportunity.closingDate,instructionUrl:newS2sOpportunity.instructionUrl,schemaUrl:newS2sOpportunity.schemaUrl,providerCode:newS2sOpportunity.providerCode">
				<property name="quickfinderAction">
					<bean parent="Uif-SecondaryActionButton-Small" p:methodToCall="performLookup"
						p:focusOnIdAfterSubmit="NEXT_INPUT" p:wrapperCssClasses="input-group-btn"
						p:actionLabel="Find an opportunity" p:iconClass="icon-search" />
				</property>
			</bean>
		</property>
	</bean>

	<bean id="PropDev-OpportunityPage-General" parent="PropDev-OpportunityPage-General-parentBean" />
	<bean id="PropDev-OpportunityPage-General-parentBean" abstract="true"
		parent="Uif-GridSection" p:headerText="Opportunity"
		p:layoutManager.libraryCssClasses="table,table-condensed"
		p:layoutManager.cssClasses="" p:layoutManager.applyDefaultCellWidths="false"
        p:fieldBindingObjectPath="document.developmentProposal.s2sOpportunity"
        p:render="@{#ViewHelper.containsOpportunity(document)}">
		<property name="items">
			<list>
				<bean parent="Uif-DataField" p:propertyName="opportunityId"
					p:fieldLabel.renderColon="false" p:order="10" />
				<bean parent="Uif-DataField" p:propertyName="opportunityTitle"
					p:fieldLabel.renderColon="false" p:order="20" />
				<bean parent="PropDev-OpportunityPage-S2sSubmissionTypeCode" 
 					p:enableAutoQuickfinder="false" p:propertyName="s2sSubmissionTypeCode" p:order="30" />
				<bean parent="Uif-FieldGroupBase" p:fieldLabel.labelText="S2S Revision Type" p:order="40">
                    <property name="group">
                        <bean parent="Uif-VerticalBoxGroup">
                            <property name="items">
                                <list>
                                    <bean parent="PropDev-OpportunityPage-S2sRevisionTypeCode" p:fieldLabel.labelText=" "
                                          p:enableAutoQuickfinder="false" p:propertyName="revisionCode" p:order="10"
                                          p:onChangeScript="Kc.PropDev.s2s.revisionToggle(this);"/>
                                    <bean parent="Uif-InputField" p:propertyName="revisionOtherDescription" p:order="20"
                                          p:fieldLabel.labelText=" " p:style="@{#ViewHelper.isS2sRevisionOther(document.developmentProposal.s2sOpportunity)?'':'display:none'}" />
                                </list>
                            </property>
                        </bean>
                    </property>
				</bean>
				<bean parent="Uif-DataField" p:propertyName="cfdaNumber"
					p:fieldLabel.renderColon="false" p:order="50" />
				<bean parent="Uif-DataField" p:propertyName="competetionId"
					p:fieldLabel.renderColon="false" p:order="60" />
				<bean parent="Uif-DataField" p:propertyName="openingDate"
					p:fieldLabel.renderColon="false" p:order="70" />
				<bean parent="Uif-DataField" p:propertyName="closingDate"
					p:fieldLabel.renderColon="false" p:order="80" />
				<bean parent="Uif-LinkField" p:fieldLabel.labelText="Instruction Page"
					p:href="@{document.developmentProposal.s2sOpportunity?.instructionUrl}"
					p:linkText="Download Instructions" p:order="90" />
				<bean parent="Uif-LinkField" p:fieldLabel.labelText="Schema URL"
					p:href="@{document.developmentProposal.s2sOpportunity?.schemaUrl}"
					p:linkText="View schema" p:order="100" />
				<bean parent="Uif-DataField" p:propertyName="s2sProvider.description"
					p:label ="S2S Provider" p:fieldLabel.renderColon="false" p:order="110" />
			</list>
		</property>
	</bean>
	
	<bean id="PropDev-OpportunityPage-S2sSubmissionTypeCode" parent="PropDev-OpportunityPage-S2sSubmissionTypeCode-parentBean" />
 	<bean id="PropDev-OpportunityPage-S2sSubmissionTypeCode-parentBean"
 		abstract="true" parent="Uif-InputField" p:propertyName="s2sSubmissionTypeCode" >
 		<property name="control">
 			<bean parent="Uif-DropdownControl"/>
 		</property> 
 		<property name="optionsFinder" value="#{#getService('s2sSubmissionTypeValueFinder')}">
        </property>
 	</bean> 
 
 	<bean id="PropDev-OpportunityPage-S2sRevisionTypeCode" parent="PropDev-OpportunityPage-S2sRevisionTypeCode-parentBean" />
 	<bean id="PropDev-OpportunityPage-S2sRevisionTypeCode-parentBean"
 		abstract="true" parent="Uif-InputField" p:propertyName="revisionCode" >
 		<property name="control">
 			<bean parent="Uif-DropdownControl"/>
 		</property>
 		<property name="optionsFinder" value="#{#getService('s2sRevisionTypeValueFinder')}">
        </property>
    </bean>

	<bean id="PropDev-OpportunityPage-Forms" parent="PropDev-OpportunityPage-Forms-parentBean" />
	<bean id="PropDev-OpportunityPage-Forms-parentBean" abstract="true"
		parent="Uif-TableCollectionSection" p:headerText="Forms"
		p:propertyName="document.developmentProposal.s2sOpportunity.s2sOppForms" p:collectionObjectClass="org.kuali.coeus.propdev.impl.s2s.S2sOppForms"
		p:renderAddLine="false" p:layoutManager.renderSequenceField="false"
		p:renderLineActions="false" p:layoutManager.richTable.render="false"
        p:render="@{#ViewHelper.containsOpportunity(document)}">
		<property name="items">
			<list>
				<bean parent="Uif-DataField" p:propertyName="formName" />
				<bean parent="Uif-MessageField" p:fieldLabel.labelText="Mandatory"
					p:messageText="@{#lp.mandatory ? 'Yes' : 'No'}" />
				<bean parent="Uif-InputField" p:propertyName="include"
					p:readOnly="@{#lp.mandatory or !#line.available or !#editModes[#proposalAuthConsts.MODIFY_S2S]}" p:readOnlyDisplayReplacement="@{#line.include ? 'Yes'  : 'No'}"
                    p:fieldLabel.labelText="[0]">
                    <property name="control">
                        <bean parent="Uif-CheckboxControl" />
                    </property>
                    <property name="fieldLabel.inlineComponents">
                        <list>
                            <bean parent="Uif-DropdownToggleMenu"
                                  p:toggleText="Include">
                                <property name="menuItems">
                                    <list>
                                        <bean parent="PropDev-OpportunityPage-SelectMenuAction" p:actionLabel="Select All" p:order="10" p:disabled="@{!#editModes['printProposal']}"
                                              p:actionScript="jQuery(&quot;input[name$='include']&quot;).not(&quot;input[disabled='disabled']&quot;).prop('checked', true);"/>
                                        <bean parent="PropDev-OpportunityPage-SelectMenuAction" p:actionLabel="Select None"  p:order="20" p:disabled="@{!#editModes['printProposal']}"
                                              p:actionScript="jQuery(&quot;input[name$='include']&quot;).not(&quot;input[disabled='disabled']&quot;).prop('checked', false);"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
				<bean parent="Uif-MessageField" p:fieldLabel.labelText="Description"
					p:messageText="@{#lp.available ? #lp.userAttachedForm ? 'User Attached Form' : 'Available' : 'Unavailable'}" />
				<bean parent="Uif-InputField" p:propertyName="selectToPrint"
					p:fieldLabel.labelText="[0]" p:readOnly="false">
                    <property name="control">
                        <bean parent="Uif-CheckboxControl"
                              p:disabled="@{!#line.available or !#editModes['printProposal'] or #lp.userAttachedForm}"/>
                    </property>
                    <property name="fieldLabel.inlineComponents">
                        <list>
                            <bean parent="Uif-DropdownToggleMenu"
                                  p:toggleText="Select">
                                <property name="menuItems">
                                    <list>
                                        <bean parent="PropDev-OpportunityPage-SelectMenuAction" p:actionLabel="Select All" p:order="10" p:disabled="@{!#editModes['printProposal']}"
                                              p:actionScript="Kc.PropDev.s2s.selectAllIncludedForms(jQuery(this).closest('.uif-tableCollectionSection').find(&quot;input[name$='selectToPrint'],input[name$='include']&quot;));"/>
                                        <bean parent="PropDev-OpportunityPage-SelectMenuAction" p:actionLabel="Select None" p:order="20" p:disabled="@{!#editModes['printProposal']}"
                                              p:actionScript="jQuery(this).closest('.uif-tableCollectionSection').find(&quot;input[name$='selectToPrint']&quot;).not(&quot;input[disabled='disabled']&quot;).prop('checked', false);"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
			</list>
		</property>
        <property name="layoutManager.libraryCssClasses">
            <list>
                <value>table</value>
                <value>table-condensed</value>
            </list>
        </property>
        <property name="layoutManager.cssClasses">
            <null/>
        </property>
        <property name="footer">
            <bean parent="Uif-FooterBase">
                <property name="items">
                    <list>
                        <bean parent="Uif-SecondaryActionButton" p:actionLabel="Create PDF" p:methodToCall="printForms"
                              p:ajaxSubmit="false" p:disableBlocking="true" p:order="10" p:cssClasses="pull-right"
                              p:disabled="@{!#editModes['printProposal']}" />
                        <bean parent="Uif-SecondaryActionButton" p:actionLabel="Create XML" p:methodToCall="printFormsXml"
                              p:ajaxSubmit="false" p:disableBlocking="true" p:order="20" p:cssClasses="pull-right"
                              p:disabled="@{!#editModes['printProposal']}" />
                    </list>
                </property>
            </bean>
        </property>
	</bean>

    <bean id="PropDev-OpportunityPage-SelectMenuAction" parent="PropDev-OpportunityPage-SelectMenuAction-parentBean"/>
    <bean id="PropDev-OpportunityPage-SelectMenuAction-parentBean" abstract="true" parent="Uif-MenuAction"
          p:cssClasses="pull-left" p:refreshId="PropDev-OpportunityPage-Forms"/>


    <bean id="PropDev-OpportunityPage-SubmissionDetailsSection" parent="PropDev-OpportunityPage-SubmissionDetailsSection-parentBean" />
    <bean id="PropDev-OpportunityPage-SubmissionDetailsSection-parentBean" abstract="true" parent="Uif-VerticalBoxSection"
            p:header.headerText="Submission Detail"
            p:render="@{#ViewHelper.containsOpportunity(document)}">
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:messageText="Submission details will be available after the proposal is submitted." p:order="10"
                      p:render="@{#empty(displayedS2sAppSubmission)}"/>
                <bean parent="PropDev-OpportunityPage-SubmissionDetails" p:order="20"
                      p:render="@{!#empty(displayedS2sAppSubmission)}"/>
            </list>
        </property>
        <property name="header.rightGroup">
            <bean parent="Uif-HorizontalBoxGroup">
                <property name="items">
                    <list>
                        <bean parent="Uif-SecondaryActionButton-Mini" p:methodToCall="refreshSubmissionDetails"
                              p:iconClass="icon-loop2" p:actionLabel="Refresh" p:order="10"
                              p:render="@{!#empty(displayedS2sAppSubmission)}"/>
                    </list>
                </property>
            </bean>
        </property>

    </bean>

    <bean id="PropDev-OpportunityPage-SubmissionDetails" parent="PropDev-OpportunityPage-SubmissionDetails-parentBean" />
    <bean id="PropDev-OpportunityPage-SubmissionDetails-parentBean"
		abstract="true" parent="Uif-GridSection"
        p:layoutManager.libraryCssClasses="table,table-condensed"
        p:layoutManager.cssClasses="" p:layoutManager.applyDefaultCellWidths="false"
        p:fieldBindingObjectPath="displayedS2sAppSubmission">
    <property name="items">
        <list>
            <bean parent="Uif-DataField" p:propertyName="receivedDate" p:order="10"/>
            <bean parent="Uif-DataField" p:propertyName="lastModifiedDate" p:order="20"/>
            <bean parent="Uif-DataField" p:propertyName="status" p:order="30"/>
            <bean parent="Uif-DataField" p:propertyName="ggTrackingId" p:order="40"/>
            <bean parent="Uif-DataField" p:propertyName="agencyTrackingId" p:order="50"/>
            <bean parent="Uif-DataField" p:propertyName="comments" p:order="60"/>
            <bean parent="Uif-LinkField"
                  p:render="@{displayedS2sAppSubmission != null and displayedS2sAppSubmission.s2sApplication != null}"
                  p:readOnly="true" p:label="Grant Application XML" p:link.linkText="@{displayedS2sAppSubmission?.s2sApplication?.name}"
                  p:link.href="?methodToCall=retrieveGrantApplicationXml&amp;formKey=@{formKey}"
                  p:order="70"/>
            <bean parent="Uif-DataField" p:label="Grant Application XML" p:readOnly="true" p:propertyName="s2sApplication.application" p:render="@{displayedS2sAppSubmission == null or displayedS2sAppSubmission.s2sApplication == null}" p:order="80"/>
            <bean parent="Uif-FieldGroupBase" p:fieldLabel.labelText="Attachments" p:order="90">
                <property name="group">
                    <bean parent="Uif-VerticalBoxGroup">
                        <property name="items">
                            <list>
                                <bean parent="PropDev-OpportunityPage-SubmissionAttachments" p:order="10"/>
                            </list>
                        </property>
                    </bean>
                </property>
            </bean>
        </list>
    </property>
    </bean>

    <bean id="PropDev-OpportunityPage-SubmissionAttachments" parent="PropDev-OpportunityPage-SubmissionAttachments-parentBean"/>
    <bean id="PropDev-OpportunityPage-SubmissionAttachments-parentBean" abstract="true" parent="Uif-ListCollectionGroup"
          p:propertyName="s2sApplication.s2sAppAttachmentList"
          p:collectionObjectClass="org.kuali.coeus.propdev.impl.s2s.S2sAppAttachments">
        <property name="items">
            <bean parent="Uif-DataField" p:propertyName="contentId" p:fieldLabel.render="false" p:order="10"/>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-UserAttachedForms" parent="PropDev-OpportunityPage-UserAttachedForms-parentBean"/>
    <bean id="PropDev-OpportunityPage-UserAttachedForms-parentBean" abstract="true" parent="Uif-VerticalBoxSection"
          p:headerText="User Attached Forms">
        <property name="items">
            <list>
                <bean parent="Uif-SecondaryActionButton" p:actionLabel="Add User Attached Form" p:order="10"
                      p:actionScript="showDialog('PropDev-OpportunityPage-AddUserAttachedForm');" p:iconClass="icon-plus"
                        p:render="@{!#parent.readOnly}"/>
                <bean parent="PropDev-OpportunityPage-UserAttachedForms-Collection" p:order="20"/>
            </list>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-Override" parent="PropDev-OpportunityPage-Override-parentBean"/>
    <bean id="PropDev-OpportunityPage-Override-parentBean" abstract="true" parent="Uif-VerticalBoxSection"
          p:headerText="Submission Override"
          p:render="@{#ViewHelper.containsOpportunity(document)}">
        <property name="items">
            <list>
                <bean parent="Uif-SecondaryActionButton" p:actionScript="showDialog('PropDev-OpportunityPage-AddS2sOverride');" p:actionLabel="Create Override" p:order="10" p:iconClass="icon-plus"
                      p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE]) and !#ViewHelper.containsOverride(document)}"/>
                <bean parent="Uif-SecondaryActionButton" p:methodToCall="removeExistingS2sOverride" p:actionLabel="Remove Override" p:order="20" p:iconClass="icon-trash"
                      p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE]) and #ViewHelper.containsOverride(document)}"/>
                <bean parent="Uif-InputField" p:propertyName="document.developmentProposal.s2sOverride.description"
                      p:render="@{#ViewHelper.containsOverride(document)}" p:readOnly="@{(!#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE])}" p:order="30"/>
                <bean parent="Uif-InputField" p:propertyName="document.developmentProposal.s2sOverride.active"
                      p:render="@{#ViewHelper.containsOverride(document)}" p:readOnly="@{(!#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE])}" p:order="40"/>
                <bean parent="PropDev-OpportunityPage-Override-Override"
                      p:render="@{#ViewHelper.containsOverride(document)}" p:order="50"/>
                <bean parent="PropDev-OpportunityPage-Override-Previous" p:order="60" />
            </list>
        </property>
    </bean>

	<bean id="PropDev-OpportunityPage-UserAttachedForms-MenuActions" parent="PropDev-OpportunityPage-UserAttachedForms-MenuActions-parentBean"/>
	<bean id="PropDev-OpportunityPage-UserAttachedForms-MenuActions-parentBean" abstract="true" parent="Kc-Dropdown-Button">
		<property name="listPrototype.items">
			<list>
            	<bean parent="Uif-MenuAction" p:actionLabel="View XML" p:style="float:left" p:order="10">
                	<property name="actionUrl">
                    	<bean parent="Uif-Url" p:href="?methodToCall=viewUserAttachedFormXML&amp;formKey=@{formKey}&amp;selectedLine=@{#index}"/>
                    </property>
                </bean>
                <bean parent="Uif-MenuAction" p:actionLabel="View PDF" p:style="float:left" p:order="20">
                	<property name="actionUrl">
                    	<bean parent="Uif-Url" p:href="?methodToCall=viewUserAttachedFormPDF&amp;formKey=@{formKey}&amp;selectedLine=@{#index}"/>
                    </property>
                </bean>
                <bean parent="Uif-MenuAction" p:actionLabel="Edit" p:style="float:left" p:order="30"
                	p:methodToCall="editCollectionLine"
                    p:hidden="@{#parent.readOnly or #ViewHelper.isCollectionLineEditable(#collectionGroup.bindingInfo.bindingPath,#index,editableCollectionLines)}"/>
                <bean parent="Uif-MenuAction" p:actionLabel="Save" p:style="float:left" p:order="40"
                    p:methodToCall="saveUserAttachedForm"
                    p:hidden="@{!#ViewHelper.isCollectionLineEditable(#collectionGroup.bindingInfo.bindingPath,#index,editableCollectionLines)}"/>
			</list>
		</property>
	</bean>

    <bean id="PropDev-OpportunityPage-Override-Previous" parent="PropDev-OpportunityPage-Override-Previous-parentBean"/>
    <bean id="PropDev-OpportunityPage-Override-Previous-parentBean" parent="Uif-VerticalBoxSection" p:disclosure.defaultOpen="false">
        <property name="items">
            <list>
                <bean parent="Uif-GridGroup" p:render="@{!#parent.readOnly and #ViewHelper.containsOverride(document) and #ViewHelper.containsOpportunity(document)}" p:order="10">
                    <property name="items">
                        <list>
                            <bean parent="Uif-SecondaryActionButton" p:methodToCall="syncCurrentGrantInformation" p:actionLabel="Sync Proposal To Current" p:order="10" p:iconClass="icon-loop2"
                                  p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE]) and #ViewHelper.containsOverride(document) and #ViewHelper.containsOpportunity(document)}"/>
                            <bean parent="Uif-SecondaryActionButton" p:methodToCall="pushCurrentToOverride" p:actionLabel="Push Current To Override" p:order="20" p:iconClass="icon-signout"
                                  p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE]) and #ViewHelper.containsOverride(document) and #ViewHelper.containsOpportunity(document)}"/>
                        </list>
                    </property>
                </bean>

                <bean parent="Uif-LinkField"
                      p:render="@{#ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.application != null and document.developmentProposal.s2sOverride.application.application != null}"
                      p:readOnly="true" p:label="Current Application" p:link.linkText="@{document.developmentProposal?.s2sOverride?.application?.name}"
                      p:link.href="?methodToCall=retrieveApplicationXml&amp;formKey=@{formKey}&amp;propertyPath=document.developmentProposal.s2sOverride.application"
                      p:order="20"/>
                <bean parent="Uif-DataField" p:label="SHA-1 Hash" p:readOnly="true" p:propertyName="document.developmentProposal.s2sOverride.application.sha1Hash"
                      p:render="@{#ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.application != null and document.developmentProposal.s2sOverride.application.application != null}"
                      p:order="30"/>

                <bean parent="Uif-DataField" p:label="SHA-1 Hash In XML" p:readOnly="true" p:propertyName="document.developmentProposal.s2sOverride.application.sha1HashInXml"
                      p:render="@{#ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.application != null and document.developmentProposal.s2sOverride.application.application != null}"
                      p:order="40"/>

                <bean parent="PropDev-OpportunityPage-Override-Previous-AttachmentSection" p:render="@{#ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.application != null}"
                      p:order="50"/>
            </list>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-Override-Previous-AttachmentSection" parent="PropDev-OpportunityPage-Override-Previous-AttachmentSection-parentBean" />
    <bean id="PropDev-OpportunityPage-Override-Previous-AttachmentSection-parentBean" abstract="true"
          parent="Uif-VerticalBoxSubSection" p:header.headerText="Current Attachments"
          p:fieldBindingObjectPath="document.developmentProposal"
          p:id="PropDev-OpportunityPage-Override-Previous-AttachmentSection">
        <property name="items">
            <list>
                <bean parent="PropDev-OpportunityPage-Override-Previous-AttachmentsCollection" p:order="10" />
            </list>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-Override-Previous-AttachmentsCollection" parent="PropDev-OpportunityPage-Override-Previous-AttachmentsCollection-parentBean"/>
    <bean id="PropDev-OpportunityPage-Override-Previous-AttachmentsCollection-parentBean" abstract="true" parent="Uif-TableCollectionGroup"
          p:propertyName="document.developmentProposal.s2sOverride.application.attachments" p:renderAddLine="false"
          p:renderLineActions="false"
          p:collectionObjectClass="org.kuali.coeus.propdev.impl.s2s.override.S2sOverrideAttachment"
          p:layoutManager.richTable.render="false"
          p:layoutManager.renderSequenceField="false">
        <property name="items">
            <list>
                <bean parent="Uif-LinkField"
                      p:readOnly="true" p:label="File" p:link.linkText="@{#line.name}"
                      p:link.href="?methodToCall=getFileFromLine&amp;formKey=@{formKey}&amp;fileName=@{#ViewHelper.urlEncode(#line.name)}&amp;propertyPath=@{#collectionGroup.bindingInfo.bindingPath}&amp;selectedLineIndex=@{#index}"
                      p:order="10"/>
                <bean parent="Uif-DataField" p:readOnly="true" p:propertyName="contentId"
                      p:order="20"/>
                <bean parent="Uif-DataField" p:label="SHA-1 Hash" p:readOnly="true" p:propertyName="sha1Hash"
                      p:order="30"/>
                <bean parent="Uif-DataField" p:label="SHA-1 Hash In XML" p:readOnly="true" p:propertyName="sha1HashInXml"
                      p:order="40"/>
            </list>
        </property>
        <property name="layoutManager.libraryCssClasses">
            <list>
                <value>table</value>
                <value>table-condensed</value>
            </list>
        </property>
        <property name="layoutManager.cssClasses">
            <list>
                <value>uif-tableCollectionLayout</value>
            </list>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-Override-Override" parent="PropDev-OpportunityPage-Override-Override-parentBean"/>
    <bean id="PropDev-OpportunityPage-Override-Override-parentBean" parent="Uif-VerticalBoxSection">
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:order="10" p:propertyName="document.developmentProposal.s2sOverride.applicationOverride.multipartFile"
                      p:label="Overridden Application"
                      p:cssClasses="s2sOverrideApplicationReplace"
                      p:hidden="@{#ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.applicationOverride != null and document.developmentProposal.s2sOverride.applicationOverride.application != null}"
                      p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE])}">
                    <property name="control">
                        <bean parent="Uif-FileControl"/>
                    </property>
                </bean>
                <bean parent="Uif-LinkField"
                      p:render="@{#ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.applicationOverride != null and document.developmentProposal.s2sOverride.applicationOverride.application != null}"
                      p:cssClasses="s2sOverrideApplicationCurrent"
                      p:readOnly="true" p:label="Overridden Application" p:link.linkText="@{document.developmentProposal?.s2sOverride?.applicationOverride?.name}"
                      p:link.href="?methodToCall=retrieveApplicationXml&amp;formKey=@{formKey}&amp;propertyPath=document.developmentProposal.s2sOverride.applicationOverride"
                      p:order="20"/>

                <bean parent="Uif-ActionField" p:order="30" p:actionLabel="Replace" p:cssClasses="s2sOverrideApplicationCurrent,pull-left"
                      p:actionScript="jQuery('.s2sOverrideApplicationReplace').show(); jQuery('.s2sOverrideApplicationCurrent').hide(); jQuery('.s2sOverrideApplicationCurrentHash').hide();"
                      p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE]) and #ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.applicationOverride != null and document.developmentProposal.s2sOverride.applicationOverride.application != null}">
                    <property name="action">
                        <bean parent="Uif-SecondaryActionButton-Mini" />
                    </property>
                </bean>
                <bean id="updateAppHash" parent="Uif-ActionField" p:order="40" p:actionLabel="Update Hash" p:cssClasses="s2sOverrideApplicationCurrentHash,pull-left"
                      p:methodToCall="updateHashS2sOverrideApplication"
                      p:render="@{#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE] and #ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.applicationOverride != null}"
                      p:hidden="@{#ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.applicationOverride != null and document.developmentProposal.s2sOverride.applicationOverride.sha1Hash eq document.developmentProposal.s2sOverride.applicationOverride.sha1HashInXml}">
                    <property name="action">
                        <bean parent="Uif-SecondaryActionButton-Mini" />
                    </property>
                </bean>

                <bean parent="Uif-ActionField" p:order="50" p:actionLabel="Cancel" p:cssClasses="s2sOverrideApplicationReplace,pull-left"
                      p:actionScript="jQuery('.s2sOverrideApplicationReplace').hide(); jQuery('.s2sOverrideApplicationCurrent').show(); jQuery('.s2sOverrideApplicationCurrentHash').toggle(jQuery('#appOverrideHash > span').text() !== jQuery('#appOverrideHashXml > span').text());"
                      p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE]) and #ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.applicationOverride != null and document.developmentProposal.s2sOverride.applicationOverride.application != null}"
                      p:hidden="true">
                    <property name="action">
                        <bean parent="Uif-SecondaryActionButton-Mini" />
                    </property>
                </bean>

                <bean parent="Uif-ActionField" p:order="60" p:actionLabel="Update" p:cssClasses="s2sOverrideApplicationReplace,pull-left"
                      p:methodToCall="replaceS2sOverrideApplication"
                      p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE]) and #ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.applicationOverride != null and document.developmentProposal.s2sOverride.applicationOverride.application != null}"
                      p:hidden="true">
                    <property name="action">
                        <bean parent="Uif-SecondaryActionButton-Mini" />
                    </property>
                </bean>

                <bean id="appOverrideHash" parent="Uif-DataField" p:label="SHA-1 Hash" p:readOnly="true" p:propertyName="document.developmentProposal.s2sOverride.applicationOverride.sha1Hash"
                      p:render="@{#ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.applicationOverride != null and document.developmentProposal.s2sOverride.applicationOverride.application != null}"
                      p:order="70"/>

                <bean id="appOverrideHashXml" parent="Uif-DataField" p:label="SHA-1 Hash In XML" p:readOnly="true" p:propertyName="document.developmentProposal.s2sOverride.applicationOverride.sha1HashInXml"
                      p:render="@{#ViewHelper.containsOverride(document) and document.developmentProposal.s2sOverride.applicationOverride != null and document.developmentProposal.s2sOverride.applicationOverride.application != null}"
                      p:order="80"/>

                <bean parent="PropDev-OpportunityPage-Override-Override-AttachmentSection" p:order="90" />
            </list>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-Override-Override-AttachmentSection" parent="PropDev-OpportunityPage-Override-Override-AttachmentSection-parentBean" />
    <bean id="PropDev-OpportunityPage-Override-Override-AttachmentSection-parentBean" abstract="true"
          parent="Uif-VerticalBoxSubSection" p:header.headerText="Overridden Attachments"
          p:fieldBindingObjectPath="document.developmentProposal"
          p:id="PropDev-OpportunityPage-Override-Override-AttachmentSection">
        <property name="items">
            <list>
                <bean parent="PropDev-OpportunityPage-Override-Override-AttachmentCollection" p:order="10" />
            </list>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-Override-Override-AttachmentCollection" parent="PropDev-OpportunityPage-Override-Override-AttachmentCollection-parentBean" />
    <bean id="PropDev-OpportunityPage-Override-Override-AttachmentCollection-parentBean" abstract="true" parent="Uif-MultiFileUploadCollection"
          p:collection.collectionObjectClass="org.kuali.coeus.propdev.impl.s2s.override.S2sOverrideAttachment"
          p:collection.propertyName="document.developmentProposal.s2sOverride.applicationOverride.attachments"
          p:collection.id="PropDev-OpportunityPage-Override-Override-AttachmentCollection"
          p:collection.layoutManager.richTable.render="false" p:addFilesButtonText="Upload &amp; Add"
          p:maxFileSize="@{#ViewHelper.getMaxUploadSizeParameter()}"
          p:readOnly="@{(!#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE])}">
        <property name="collection.lineActions">
            <list merge="true">
                <!-- performClientSideValidation must be true even on delete. When required field contentId is empty, and the delete button is pushed, the contentId will
                be cleared and JPA will flush causing a violation.  Ideally this would not be an issue on delete... -->
                <bean parent="Uif-SecondaryActionButton-Mini" p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE])}"
                      p:methodToCall="deleteFileUploadLine" p:title="Delete"
                      p:onMouseOverScript="deleteLineMouseOver(this, 'uif-collectionDeleteHighlight');"
                      p:onMouseOutScript="deleteLineMouseOut(this, 'uif-collectionDeleteHighlight');"
                      p:onClickScript="writeCurrentPageToSession(this);" p:dirtyOnAction="true"
                      p:performClientSideValidation="true"
                      p:loadingMessageText="Deleting File..." p:iconClass="icon-trash" p:order="10"/>

                <!-- KRAD will not refresh the application override hash attributes or section holding them. Using successCallback to click the update button which may be in a hidden state -->
                <bean parent="Uif-SecondaryActionButton-Mini" p:render="@{(#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE]) and #line.sha1Hash ne #line.sha1HashInXml and #line.sha1HashInXml ne null}"
                      p:title="Update Hash"
                      p:methodToCall="updateHashFileUploadLine"
                      p:onClickScript="writeCurrentPageToSession(this);" p:dirtyOnAction="true"
                      p:successCallback="jQuery('#updateAppHash > button').click()"
                      p:performClientSideValidation="true"
                      p:loadingMessageText="Updating Hash in Application XML..." p:iconClass="icon-loop2" p:order="20">
                </bean>
            </list>
        </property>
        <property name="collection.items">
            <list>
                <bean parent="Uif-LinkField"
                      p:readOnly="true" p:label="File" p:link.linkText="@{#line.name}"
                      p:link.href="?methodToCall=getFileFromLine&amp;formKey=@{formKey}&amp;fileName=@{#ViewHelper.urlEncode(#line.name)}&amp;propertyPath=@{#collectionGroup.bindingInfo.bindingPath}&amp;selectedLineIndex=@{#index}"
                      p:order="10"/>
                <bean parent="Uif-InputField" p:propertyName="contentId" p:readOnly="@{(!#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE])}"
                      p:order="20"/>
                <bean parent="Uif-DataField" p:label="SHA-1 Hash" p:readOnly="true" p:propertyName="sha1Hash"
                      p:order="30"/>
                <bean parent="Uif-DataField" p:label="SHA-1 Hash In XML" p:readOnly="true" p:propertyName="sha1HashInXml"
                      p:order="40"/>
            </list>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-UserAttachedForms-Collection" parent="PropDev-OpportunityPage-UserAttachedForms-Collection-parentBean"/>
    <bean id="PropDev-OpportunityPage-UserAttachedForms-Collection-parentBean" abstract="true" parent="Uif-TableCollectionSection"
          p:propertyName="document.developmentProposal.s2sUserAttachedForms" p:collectionObjectClass="org.kuali.coeus.propdev.impl.s2s.S2sUserAttachedForm"
          p:layoutManager.renderSequenceField="false"
          p:layoutManager.richTable.render="false" p:renderAddLine="false">
        <property name="lineActions">
            <list>
                <bean parent="Uif-DeleteLineAction" p:actionLabel="" p:methodToCall="deleteUserAttachedForm"
                      p:iconClass="icon-trash" p:order="30" p:render="@{!#parent.readOnly}"
                      p:additionalSubmitData="selectedLine:@{#index}">
                    <property name="confirmationDialog">
                        <bean parent="Uif-DialogGroup-OkCancel" p:promptText="Are you sure you want to delete @{#lp.formName}?"/>
                    </property>
                </bean>
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="description" p:order="10"
                      p:readOnly="@{!#ViewHelper.isCollectionLineEditable(#collectionGroup.bindingInfo.bindingPath,#index,editableCollectionLines)}"
                      p:fieldLabel.labelText="Description"/>
                <bean parent="Uif-DataField" p:propertyName="namespace" p:order="20"
                      p:fieldLabel.labelText="Namespace"/>
                <bean parent="Uif-DataField" p:propertyName="formName" p:order="30"
                      p:fieldLabel.labelText="Form Name" />
                <bean parent="Uif-DataField" p:propertyName="formFileName" p:order="40"
                      p:fieldLabel.labelText="File Name" />
				<bean parent="Uif-FieldGroupBase" p:label="Actions" p:order="50">
					<property name="group">
						<bean parent="PropDev-OpportunityPage-UserAttachedForms-MenuActions" p:order="10"/>
					</property>
				</bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <bean parent="PropDev-OpportunityPage-UserAttachedFormAttachments-Collection" p:order="10"/>
            </list>
        </property>
        <property name="layoutManager.libraryCssClasses">
            <list>
                <value>table</value>
                <value>table-condensed</value>
            </list>
        </property>
        <property name="layoutManager.cssClasses">
            <null/>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-UserAttachedFormAttachments-Collection" parent="PropDev-OpportunityPage-UserAttachedFormAttachments-Collection-parentBean"/>
    <bean id="PropDev-OpportunityPage-UserAttachedFormAttachments-Collection-parentBean" abstract="true" parent="Uif-Disclosure-StackedSubCollection-WithinSection"
          p:propertyName="s2sUserAttachedFormAtts" p:renderAddLine="false" p:renderLineActions="false" p:collectionObjectClass="org.kuali.coeus.propdev.impl.s2s.S2sUserAttachedFormAtt" p:header.headerText="Embedded Attachments">
        <property name="items">
            <list>
                <bean parent="Uif-LinkField"
                      p:readOnly="true" p:fieldLabel.render="false" p:link.linkText="@{#line.name}"
                      p:link.href="?methodToCall=getFileFromLine&amp;formKey=@{formKey}&amp;fileName=@{#ViewHelper.urlEncode(#line.name)}&amp;propertyPath=@{#collectionGroup.bindingInfo.bindingPath}FileMetas&amp;selectedLineIndex=@{#index}"
                      p:order="10"/>
            </list>
        </property>
    </bean>

    <bean id="PropDev-OpportunityPage-AddUserAttachedForm" parent="PropDev-OpportunityPage-AddUserAttachedForm-parentBean"/>
    <bean id="PropDev-OpportunityPage-AddUserAttachedForm-parentBean" abstract="true" parent="Uif-DialogGroup"
          p:fieldBindingObjectPath="s2sUserAttachedForm"
            p:headerText="Add User Attached Form">
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="description" p:order="10"
                      p:required="true" p:fieldLabel.labelText="Description"/>
                <bean parent="Uif-InputField" p:propertyName="newFormFile" p:order="20"
                      p:required="true" p:fieldLabel.labelText="File">
                    <property name="control">
                        <bean parent="Uif-FileControl"/>
                    </property>
                </bean>
            </list>
        </property>
        <property name="footer.items">
            <list>
                <bean parent="Uif-PrimaryActionButton" p:actionLabel="Add" p:order="10"
                      p:methodToCall="addUserAttachedForm" p:dialogDismissOption="REQUEST"
                      p:performClientSideValidation="true"/>
            </list>
        </property>
    </bean>


    <bean id="PropDev-OpportunityPage-AddS2sOverride" parent="PropDev-OpportunityPage-AddS2sOverride-parentBean"/>
    <bean id="PropDev-OpportunityPage-AddS2sOverride-parentBean" abstract="true" parent="Uif-DialogGroup"
          p:fieldBindingObjectPath="newS2sOverride"
          p:headerText="Add S2S Override"
          p:readOnly="@{(!#editModes[#proposalAuthConsts.MODIFY_S2S_OVERRIDE])}">
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:order="10" p:propertyName="description"
                      p:required="true" />
                <bean parent="Uif-InputField" p:propertyName="active" p:order="20"
                      p:required="false" />
            </list>
        </property>
        <property name="footer.items">
            <list>
                <bean parent="Uif-PrimaryActionButton" p:actionLabel="Add" p:order="10"
                      p:methodToCall="addNewS2sOverride" p:dialogDismissOption="REQUEST"
                      p:performClientSideValidation="true"/>
            </list>
        </property>
    </bean>

</beans>
